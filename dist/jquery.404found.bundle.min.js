!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof module&&module.exports?require("jquery"):jQuery)}(function(e){var o={},t=document.createElement("style");t.setAttribute("type","text/css");var a='.comebackhome-container{font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;width:100%;max-height:100%;position:absolute;bottom:0;left:0;background:#fff;z-index:100000}.comebackhome-header{padding:20px;color:#eee;background:#ec6952;}.comebackhome-header .comebackhome-title{font-size:18px}.comebackhome-header .comebackhome-subheading{font-size:14px;float:right}.comebackhome-header .comebackhome-pulluptab{position:relative;top:-50px;color:#eee;background:#ec6952;float:right;-webkit-border-radius:10px;border-radius:10px;padding:10px}.comebackhome-panel{display:none;padding-top:15px}.comebackhome-results{text-align:center;margin:0;padding-left:0;list-style-type:none}.comebackhome-person-frame{width:33%;float:left;padding-bottom:20px}.comebackhome-person-name{margin-top:30px;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;color:#ec6952;font-size:16px;font-weight:400}.comebackhome-person-location{margin-top:2px;color:#666;font-size:14px}.comebackhome-person-extra{position:static;left:0;right:0;bottom:0;margin-top:30px;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;color:#999;font-size:12px;line-height:15px}.comebackhome-person-picture{display:block;margin-top:10px;margin-right:auto;margin-left:auto;width:150px;height:150px;-webkit-border-radius:50%;border-radius:50%}.comebackhome-person-col{width:40%;position:relative;float:left;text-align:left}';"textContent"in t?t.textContent=a:t.styleSheet.cssText=a;var n=document.getElementsByTagName("head")[0];n.appendChild(t),o.body=function(){var e='<div class="comebackhome-container"> <div class="comebackhome-header"> <div class="comebackhome-pulluptab">^ Help find missing people</div> <div class="comebackhome-title">404 Person Not Found</div> </div> <div class="comebackhome-panel"> <ul class="comebackhome-results"></ul> </div></div>';return e},o.items=function(e){var o="",t=e;if(t)for(var a,n=-1,i=t.length-1;i>n;)a=t[n+=1],o+='<li> <a href="'+a.url+'" target=\'__blank\'> <div class="comebackhome-person-frame"> <div class="comebackhome-person-col"> <img class="comebackhome-person-picture" src="http://res.cloudinary.com/comebackhome/image/fetch/w_150,h_150,c_fill,f_auto,g_face:center,e_grayscale/'+a.thumbnail_url+'" alt="'+a.name+'"> </div> <div class="comebackhome-person-col"> <div class="comebackhome-person-name">'+a.display_name+'</div> <div class="comebackhome-person-location">'+a.display_location+'</div> <div class="comebackhome-person-extra"> Missing since '+new Date(a.since).toDateString()+"<br> Age now: "+a.age_now+"<br> </div> </div> </div> </a></li>";return o};var i="http://comebackhome.org/api/v1/person/",c={max_results:6},r=function(o){return o=e.extend({format:"json"},c,o),e.getJSON(i,o)},m=function(){return e.getJSON("https://freegeoip.net/json/")},s=function(e){for(var o,t,a=e.length;a;o=Math.floor(Math.random()*a),t=e[--a],e[a]=e[o],e[o]=t);return e};return e.found=function(t,a){a=e.extend({},c,a),a.limit=Math.max(50,a.max_results);var n=t instanceof e?t:e(t);n.append(o.body());var i=n.find(".comebackhome-container"),l=n.find(".comebackhome-panel"),d=n.find(".comebackhome-results");i.click(function(){l.slideToggle()});var p=o.items;m().done(function(e){a.lat=Math.round(e.latitude),a.lon=Math.round(e.longitude),r(a).done(function(e){var o=s(e.objects).slice(0,a.max_results);d.html(p(o))})})},e.found.getData=r,e(function(){e.found(e("body"),{})}),e.found});