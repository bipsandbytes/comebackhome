!function(e,o){"function"==typeof define&&define.amd?define([],o):"object"==typeof exports?module.exports=o():e.Comebackhome=o()}(this,function(){function e(e,o){return new RegExp(" "+o+" ").test(" "+e.className+" ")}var o=document.createElement("style");o.setAttribute("type","text/css");var t='#comebackhome-container{font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;width:100%;max-height:100%;position:fixed;bottom:0;left:0;background-color:#fff;z-index:100000}.comebackhome-header{padding:15px;color:#eee;background-color:#428bca;cursor:pointer;}.comebackhome-header .comebackhome-title{font-size:16px;line-height:19.2px}.comebackhome-header .comebackhome-subheading{font-size:14px;line-height:16.8px;float:right}.comebackhome-header .comebackhome-pulluptab{position:absolute;top:-30px;color:#eee;background-color:#428bca;right:10px;-webkit-border-radius:10px;border-radius:10px;padding:10px}.comebackhome-header .comebackhome-title-throb{-webkit-animation:fade 3s infinite;-moz-animation:fade 3s infinite;-o-animation:fade 3s infinite;-ms-animation:fade 3s infinite;animation:fade 3s infinite}@-moz-keyframes fade{from{opacity:1;-ms-filter:none;filter:none}50%{opacity:.2;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=20)";filter:alpha(opacity=20)}to{opacity:1;-ms-filter:none;filter:none}}@-webkit-keyframes fade{from{opacity:1;-ms-filter:none;filter:none}50%{opacity:.2;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=20)";filter:alpha(opacity=20)}to{opacity:1;-ms-filter:none;filter:none}}@-o-keyframes fade{from{opacity:1;-ms-filter:none;filter:none}50%{opacity:.2;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=20)";filter:alpha(opacity=20)}to{opacity:1;-ms-filter:none;filter:none}}@keyframes fade{from{opacity:1;-ms-filter:none;filter:none}50%{opacity:.2;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=20)";filter:alpha(opacity=20)}to{opacity:1;-ms-filter:none;filter:none}}#comebackhome-panel{display:none;padding-top:15px;}#comebackhome-panel .comebackhome-poweredby{float:right;padding-right:10px;font-size:12px;line-height:14.399999999999999px}.comebackhome-show{display:block !important}#comebackhome-results{overflow:hidden;margin:0;padding-left:0;list-style-type:none}.comebackhome-person-frame{width:33%;float:left;margin-bottom:20px;}.comebackhome-person-frame:nth-of-type(3n + 1){clear:left}.comebackhome-person-name{margin-top:15%;color:#428bca;font-size:16px;line-height:19.2px}.comebackhome-person-location{color:#666;font-size:14px;line-height:16.8px}.comebackhome-person-extra{margin-top:30px;color:#999;font-size:12px;line-height:14.399999999999999px}.comebackhome-person-picture{display:block;margin:10px auto;width:100%;max-width:150px;max-height:150px;-webkit-border-radius:50%;border-radius:50%}.comebackhome-person-column{width:50%;position:relative;float:left;text-align:left}';"textContent"in o?o.textContent=t:o.styleSheet.cssText=t;var a=document.getElementsByTagName("head")[0];a.appendChild(o);var n={};n.shuffle=function(e){for(var o,t,a=e.length;a;o=Math.floor(Math.random()*a),t=e[--a],e[a]=e[o],e[o]=t);return e};var i=[].slice;n.extend=function(){var e,o,t,a,n=i.call(arguments),c=n[0];for(e=1,o=n.length;o>e;e++){a=n[e];for(t in a)a.hasOwnProperty(t)&&(c[t]=a[t])}return c};var c=function(e){var o;try{o=JSON.parse(e.responseText)}catch(t){o=e.responseText}return[o,e]},r=function(e,o){var t,a=[];for(t in e)e.hasOwnProperty(t)&&a.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return o&&a.push("_t="+Date.now()),a.join("&")};n.getJSON=function(e,o){var t={success:function(){},error:function(){}},a=window.XMLHttpRequest||ActiveXObject,n=new a("MSXML2.XMLHTTP.3.0");return o&&(e+="?"+r(o)),n.open("get",e,!0),n.onreadystatechange=function(){4===n.readyState&&(200===n.status?t.success.apply(t,c(n)):t.error.apply(t,c(n)))},n.send(o),{success:function(e){return t.success=e,t},error:function(e){return t.error=e,t}}},n.addEvent=function(e,o,t){return e.attachEvent?e.attachEvent("on"+o,t):e.addEventListener(o,t,!1)},n.toggleClass=function(o,t){var a=" "+o.className.replace(/[\t\r\n]/g," ")+" ";if(e(o,t)){for(;a.indexOf(" "+t+" ")>=0;)a=a.replace(" "+t+" "," ");o.className=a.replace(/^\s+|\s+$/g,"")}else o.className+=" "+t},n.ready=function(e){var o=!1,t=!0,a=document.documentElement,n=document.addEventListener,i=n?"addEventListener":"attachEvent",c=n?"removeEventListener":"detachEvent",r=n?"":"on",m=function(t){("readystatechange"!=t.type||"complete"==document.readyState)&&(("load"==t.type?window:document)[c](r+t.type,m,!1),!o&&(o=!0)&&e.call(window,t.type||t))},s=function(){try{a.doScroll("left")}catch(e){return void setTimeout(s,50)}m("poll")};if("complete"==document.readyState)e.call(window,"lazy");else{if(!n&&a.doScroll){try{t=!window.frameElement}catch(l){}t&&s()}document[i](r+"DOMContentLoaded",m,!1),document[i](r+"readystatechange",m,!1),window[i](r+"load",m,!1)}},n.trackUsage=function(){var e=document.createElement("script");e.type="text/javascript",e.text="(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','http://www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-61554464-1', 'auto'); ga('send', 'pageview');",document.getElementsByTagName("head")[0].appendChild(e)};var m={};m.body=function(e){var o='<div id="comebackhome-container"> <div class="comebackhome-header"> <div class="comebackhome-pulluptab">â–² Help find missing people</div> <div id="comebackhome-title" class="comebackhome-title comebackhome-title-throb">404 Person Not Found</div> </div> <div id="comebackhome-panel"> <ul id="comebackhome-results"></ul> <p class="comebackhome-poweredby"> Powered by <a target="_blank" href="http://comebackhome.org/">comebackhome.org</a> </p> </div></div>';return o},m.items=function(e){var o="",t=e;if(t)for(var a,n=-1,i=t.length-1;i>n;)a=t[n+=1],o+='<li class="comebackhome-person-frame"> <a href="'+a.url+'" target="_blank"> <div class="comebackhome-person-column"> <img class="comebackhome-person-picture" src="http://res.cloudinary.com/comebackhome/image/fetch/w_150,h_150,c_fill,f_auto,g_face:center,e_grayscale/'+a.thumbnail_url+'" alt='+a.name+'> </div> <div class="comebackhome-person-column comebackhome-person-info"> <div class="comebackhome-person-name">'+a.display_name+'</div> <div class="comebackhome-person-location">'+a.display_location+'</div> <div class="comebackhome-person-extra"> Missing since '+new Date(a.since).toLocaleDateString()+" ",a.age_now&&(o+=" <br> Age now: "+a.age_now+" "),o+=" </div> </div> </a></li>";return o};var s="http://comebackhome.org/api/v1/person/",l="https://ifreegeoip.net/json/",d={city:"San Francisco",country_code:"US",country_name:"United States",ip:"50.203.185.210",latitude:37.7833,longitude:122.4167,metro_code:415,region_code:"CA",region_name:"California",time_zone:"America/Los_Angeles",zip_code:"94107"},p={limit:6},f=function(e){return n.getJSON(s,n.extend({},p,e))},h=n.getJSON.bind(n,l),u=!1,g=function(e,o){if(!u){u=!0;var t=document.createElement("div");t.innerHTML=m.body(),e.appendChild(t);var a=document.getElementById("comebackhome-container"),i=document.getElementById("comebackhome-panel"),c=document.getElementById("comebackhome-title"),r=document.getElementById("comebackhome-results");n.addEvent(a,"click",function(){n.toggleClass(i,"comebackhome-show"),n.toggleClass(c,"comebackhome-title-throb")});var s=m.items,l=function(e){console.log("---"),console.log(e),o=n.extend({lat:Math.round(e.latitude),lon:Math.round(e.longitude)},p,o),f(o).success(function(e){var o=n.shuffle(e.objects);r.innerHTML=s(o)})};h().success(l(location)).error(l(d)),n.trackUsage()}};return g.getData=f,n.ready(function(){g(document.body,{})}),g});